<? if (!$this->isAjax): ?>
<div class="container regular">
    <div id="load-playlist" isAlbum="<?= 'album' === $this->collection->getType() ? 'true' : 'false'; ?>" class="invisible"><?= $this->collection->id; ?></div>
    <?= $this->jPlayer('lonely'); ?>

<? endif; ?>

<div class="collection-info">
    <div class="cover">
        <img src="<?= $this->collection->getCover(); ?>"/>
    </div>
    <div class="caption">
        <? if ('album' === $this->collection->getType()): ?>
        <div class="info">
            <?= $this->t('Artist') . ': ' . ($this->isAjax ? ucfirst($this->collection->artist) : $this->a('/artist/' . urlencode($this->collection->artist), ucfirst($this->collection->artist))); ?>
        </div>
        <? endif; ?>
        <div class="info">
            <?= $this->t('Name') . ': ' . $this->collection->getCoverName(); ?>
        </div>
        <div class="info">
            <?= $this->t('Type') . ': ' . $this->t(ucfirst($this->collection->getType())); ?>
        </div>
        <div class="info">
            <?= $this->t('Duration') . ': ' . $this->secsToTime($this->collection->playTime()); ?>
        </div>
        <div class="info">
            <?= $this->t('Nro Tracks') . ': ' . count($this->collection->getTrackListAsArray()); ?>
        </div>
        <? if ($this->collection instanceof DbTable_AlbumRow): ?>
            <div class="info">
                <?= $this->t('Share') . ': ' . '<a href="' . $this->collection->facebookUrl . '"><img class="icon" src="/img/facebook.png"/></a>'
                . '<a href="' . $this->collection->shareUrl . '"><img class="icon" src="/img/link.png"/></a>' ; ?>
            </div>

            <? if (false === $this->isAjax): ?>
                <div class="info">
                    <?= $this->a($this->collection->shareUrl, $this->t('Add this Album to your collection')); ?>
                </div>
            <? endif; ?>
        <? endif; ?>

    </div>
    <table class="tracklist table table-striped">
        <caption><?= $this->t('Track list'); ?></caption>
        <thead></thead>
        <tbody>
        <? $count = 0; foreach ($this->collection->getTrackListSync() as $track): ?>
            <? if (!array_key_exists('title', $track)) continue; ?>
            <tr>
                <td><?= ++$count; ?></div>
                <td><img src="<?= $track['cover']; ?>"/></td>
                <td>
                    <div class="info"><?=  $this->t('Name') . ': ' . $track['title']; ?></div>
                    <div class="info"><?= $this->t('Duration') . ': ' . $this->secsToTime($track['duration']); ?></div>
                </td>
            </tr>
        <? endforeach; ?>
        </tbody>
    </table>


</div>

<? if (!$this->isAjax): ?>
    <?= $this->render('artist/similarity.phtml'); ?>
</div>
<? endif; ?>

